{% extends "base.html" %}

{% block title %}Nexus Digital Bank - Login{% endblock %}

{% block content %}
<div
 style="max-width: 500px; margin: 4rem auto; background: #fff; color: #000; padding: 2rem; border-radius: 12px; box-shadow: 0 20px 40px rgba(0,0,0,0.4); text-align: center;">
 <div style="margin-bottom: 2rem;">
  <h1 style="color: #1a365d; margin: 0; font-family: 'Times New Roman', serif;">NEXUS DIGITAL</h1>
  <p style="color: #64748b; font-weight: bold; letter-spacing: 2px;">SECURE BANKING PORTAL</p>
 </div>

 <form id="loginForm" style="text-align: left;">
  <div style="margin-bottom: 1.5rem;">
   <label style="display: block; font-size: 0.85rem; font-weight: bold; margin-bottom: 0.5rem;">ONLINE ID</label>
   <input type="text" name="username" style="width: 100%; padding: 12px; border: 1px solid #cbd5e1; border-radius: 6px;"
    placeholder="Username" required>
  </div>
  <div style="margin-bottom: 2rem;">
   <label style="display: block; font-size: 0.85rem; font-weight: bold; margin-bottom: 0.5rem;">PASSCODE</label>
   <input type="password" name="password"
    style="width: 100%; padding: 12px; border: 1px solid #cbd5e1; border-radius: 6px;" placeholder="••••••••" required>
  </div>
  <button type="submit"
   style="width: 100%; background: #1a365d; color: #fff; padding: 14px; border: none; border-radius: 6px; font-weight: bold; cursor: pointer;">SIGN
   IN SAFELY</button>
 </form>

 <div id="msg" style="margin-top: 1.5rem; color: #dc2626; font-size: 0.9rem;"></div>

 <div style="margin-top: 3rem; font-size: 0.8rem; color: #64748b; border-top: 1px solid #e2e8f0; padding-top: 1.5rem;">
  Protected by Nexus Guardian™ Dual-Layer Authentication. <br>
  Member FDIC. Equal Housing Lender.
 </div>
</div>

<script>
 document.getElementById('loginForm').onsubmit = async (e) => {
  e.preventDefault();
  const formData = new FormData(e.target);
  const resp = await fetch('/level-06/login', {
   method: 'POST',
   body: formData
  });

  if (resp.status === 200) {
   const data = await resp.json();
   if (data.status === 'mfa_required') {
    window.location.href = data.next;
   }
  } else {
   const data = await resp.json();
   document.getElementById('msg').innerText = data.message;
  }
 };
</script>
{% endblock %}